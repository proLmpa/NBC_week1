<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>올T 소개 페이지</title>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!--bootstarp-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>

  <style>
    /* 전체 body에 대한 스타일링 */
    body {
      font-family: Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
      color: #333;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
    }

    /* 팀 이름 헤더에 대한 스타일링 */
    .team-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #333;
      color: #fff;
      font-size: 24px;
      font-weight: bold;
      padding: 16px;
      width: 100%;
    }

    /* 블로그 링크에 대한 스타일링 */
    .myBlog a {
      color: #333;
      font-weight: bold;
      text-decoration: none;
    }

    .myBlog a:hover {
      color: blue;
      text-decoration: underline;
    }

    /* MBTI 투표에 대한 스타일링 */
    .mbti-vote {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 36px;
    }

    .mbti-vote button {
      width: 80px;
      height: 40px;
      padding: 10px;
      margin: 0 8px;
      border: none;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      font-size: 16px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
    }

    .mbti-vote button:hover {
      background-color: #333;
      color: #fff;
    }

    .mbti-btn {
      height: 50px;
      width: 50px;
      font-size: 20px;
      border-radius: 50%;
      border: none;
      background-color: #ffffff;
      color: #000000;
      cursor: pointer;
      margin: 10px;
    }

    .mbti-btn.selected {
      background-color: #000;
      color: #fff;
    }

    #submit-button {
      height: 50px;
      width: 70px;
      font-size: 20px;
      border-radius: 5%;
      border: none;
      background-color: #ffffff;
      color: #000000;
      cursor: pointer;
      margin: 10px;
      margin-top: 50px;
    }

    .mbti-btn-left {
      position: absolute;
      left: 0;
    }

    .mbti-btn-right {
      position: absolute;
      right: 0;
    }

    .mbti-question {
      margin: 0 20px;
      font-size: 18px;
    }

    .mbti-question-left {
      position: absolute;
      left: 25%;
    }

    .mbti-question-right {
      position: absolute;
      right: 25%;
    }

    .mbti-divider {
      margin: 0;
      font-size: 24px;
      font-weight: bold;
      position: absolute;
      transform: translateX(-50%);
    }

    /* 슬라이드에 대한 스타일링 */
    .team-desc {
      font-family: 'Gowun Dodum', sans-serif;
      font-size: 35px;
      text-decoration: none;
      width: auto;
      height: 200px;
      padding: 10px;
      margin-left: 20px;
    }

    .carousel {
      width: 800px;
      height: 400px;

      margin: auto;
      margin-top: 100px;
    }

    .carousel-inner {
      height: 400px;
    }

    .img-thumbnail {
      width: 400px;
      height: 400px;
      object-fit: cover;
    }

    .myContent {
      font-size: 20px;

      padding: 20px;
      background-color: #c0f8d7;

      width: 65%;
      height: 400px;

      border-radius: 10px;
      border: 3px solid black
    }
  </style>
  <script>
    window.onload = function () {
      statistics();
    };

    function statistics() {
      fetch('/statistics').then(res => res.json()).then(data => {
        let rows = data['result']
        rows.forEach((a) => {
          let mbti_e = a['e']
          let mbti_i = a['i']
          let mbti_n = a['n']
          let mbti_s = a['s']
          let mbti_t = a['t']
          let mbti_f = a['f']
          let mbti_j = a['j']
          let mbti_p = a['p']
        })
      })
    }
  </script>

</head>

<body>
  <div class="team-title">
    <p>팀 소개 페이지: 올T (All T)</p>
  </div>

  <div class="team-intro" id="team-mbti">
    <div class="mbti-vote">
      <button id="e-btn" class="mbti-btn mbti-btn-left" data-mbti-type="e">E</button>
      <p class="mbti-question mbti-question-left"> 왜 집에만 있어?</p>
      <p class="mbti-divider"> vs. </p>
      <p class="mbti-question mbti-question-right"> 왜 나가?</p>
      <button id="i-btn" class="mbti-btn mbti-btn-right" data-mbti-type="i">I</button>
    </div>
    <div class="mbti-vote">
      <button id="n-btn" class="mbti-btn mbti-btn-left" data-mbti-type="n">N</button>
      <p class="mbti-question mbti-question-left">난 오늘도 꿈을 꾼다</p>
      <p class="mbti-divider"> vs. </p>
      <p class="mbti-question mbti-question-right"> 발 닦고 잠이나 자</p>
      <button id="s-btn" class="mbti-btn mbti-btn-right" data-mbti-type="s">S</button>
    </div>
    <div class="mbti-vote">
      <button id="t-btn" class="mbti-btn mbti-btn-left" data-mbti-type="t">T</button>
      <p class="mbti-question mbti-question-left"> ...? </p>
      <p class="mbti-divider"> vs. </p>
      <p class="mbti-question mbti-question-right"> ㅜㅜㅜㅜㅜㅜㅜㅜㅜㅜㅜㅜㅜ</p>
      <button id="f-btn" class="mbti-btn mbti-btn-right" data-mbti-type="f">F</button>
    </div>
    <div class="mbti-vote">
      <button id="j-btn" class="mbti-btn mbti-btn-left" data-mbti-type="j">J</button>
      <p class="mbti-question mbti-question-left"> 계획부터 짜자 </p>
      <p class="mbti-divider"> vs. </p>
      <p class="mbti-question mbti-question-right"> 내가 가는 곳이 곧 길이다 </p>
      <button id="p-btn" class="mbti-btn mbti-btn-right" data-mbti-type="p">P</button>
    </div>
    <button id="submit-button">제출</button>
  </div>

  <!--Autoplaying carousels-->
  <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="10000">
        <div class="d-flex align-items-center">
          <img src="https://ifh.cc/g/6os1V4.jpg" class="img-thumbnail">
          <div class="myContent">
            <p class="myName"><b>소개: </b>김희열</p>
            <p class="myMBTI"><b>MBTI: </b>ISTJ</p>
            <p class="myStr"><b>자신만의 강점: </b>사람들의 필요와 요구에 따라 자신을 맞출 수 있습니다.</p>
            <p class="myStyle"><b>자신의 스타일: </b>다른 사람이 원하지 않으면 리더를 자청하고, 잘못한 건 피드백 받습니다</p>
            <br>
            <p class="myBlog"><b>블로그(Tistory): </b><a href=" https://ogig0818.tistory.com/">링크</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="10000">
        <div class="d-flex align-items-center">
          <img src="https://ifh.cc/g/6Hp07q.jpg" class="img-thumbnail">
          <div class="myContent">
            <p class="myName"><b>소개: </b>고은비</p>
            <p class="myMBTI"><b>MBTI: </b>ISTJ</p>
            <p class="myStr"><b>자신만의 장점: </b>고집이 세지 않고 다른 사람의 의견수용을 우선시합니다.</p>
            <p class="myStyle"><b>자신의 스타일: </b>민폐는 되지 않기 위해 1인분 이상은 하자. 팀플은 세분화된 계획을 차근차근 진행하는 것을 선호</p>
            <br>
            <p class="myBlog"><b>블로그(Tistory): </b><a href="https://ggomcoding.tistory.com/">링크</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="10000">
        <div class="d-flex align-items-center">
          <img src="https://ifh.cc/g/t06QrT.jpg" class="img-thumbnail">
          <div class="myContent">
            <p class="myName"><b>소개: </b>한지훈</p>
            <p class="myMBTI"><b>MBTI: </b>ESTJ</p>
            <p class="myStr"><b>자신만의 장점: </b>나이가 깡패다.</p>
            <p class="myStyle"><b>자신의 스타일: </b>작업은 깔끔하고 보기 좋게 구성하는 것을 좋아합니다. 협업은 서로 좋은게 좋은것이라는 마인드</p>
            <br>
            <p class="myBlog"><b>블로그(Tistory): </b><a href="https://ggomcoding.tistory.com/">링크</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="10000">
        <div class="d-flex align-items-center">
          <img src="https://ifh.cc/g/JqxBl8.jpg" class="img-thumbnail">
          <div class="myContent">
            <p class="myName"><b>소개: </b>송어진</p>
            <p class="myMBTI"><b>MBTI: </b>ENTJ</p>
            <p class="myStr"><b>자신만의 장점: </b>대화 가능한 사람이다. 힘든 일을 즐길 줄 안다.</p>
            <p class="myStyle"><b>자신의 스타일: </b>팀플에 언제나 진심인 !열!쪙! 토론형 스타일</p>
            <br>
            <p class="myBlog">
              <b>노션(Notion): </b><a
                href="https://lapis-holly-92a.notion.site/PROGRAMMING-7069dd8d9cff42a9bfa713aceb634adc">링크</a><br>
              <b>블로그(Tistory): </b><a href="https://meitner.tistory.com/">링크</a>
            </p>
          </div>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="10000">
        <div class="d-flex align-items-center">
          <img src="https://ifh.cc/g/J5SKL7.jpg" class="img-thumbnail">
          <div class="myContent">
            <p class="myName"><b>소개: </b>송이삭</p>
            <p class="myMBTI"><b>MBTI: </b>INTP</p>
            <p class="myStr"><b>자신만의 장점: </b>화가 안남, 목표한 바가 있으면 집중력이 높음.</p>
            <p class="myStyle"><b>자신의 스타일: </b>원하는 바가 있으면 주장하는 편이나 방향이 같은 팀원들의 좋은 의견이 있다면 그에 따라감</p>
            <br<<p class="myBlog">
              <b>깃헙(GitHub): </b><a href="https://github.com/isaacsong-2">링크</a><br>
              <b>블로그(Tistory): </b><a href="https://sisaac.tistory.com/">링크</a>
              </p>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
</body>

<script>
  const eBtn = document.getElementById('e-btn');
  const iBtn = document.getElementById('i-btn');
  const nBtn = document.getElementById('n-btn');
  const sBtn = document.getElementById('s-btn');
  const tBtn = document.getElementById('t-btn');
  const fBtn = document.getElementById('f-btn');
  const jBtn = document.getElementById('j-btn');
  const pBtn = document.getElementById('p-btn');

  const mbtiBtns = [eBtn, iBtn, nBtn, sBtn, tBtn, fBtn, jBtn, pBtn];

  // 대립되는 버튼 쌍을 배열로 정의합니다.
  const conflictingPairs = [
    [eBtn, iBtn],
    [nBtn, sBtn],
    [tBtn, fBtn],
    [jBtn, pBtn]
  ];

  // 버튼을 클릭했을 때의 동작을 설정합니다.
  mbtiBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      // 현재 버튼이 선택된 상태인지 확인
      const isSelected = btn.classList.contains('selected');

      // 대립되는 버튼들의 선택 상태를 초기화합니다.
      conflictingPairs.forEach(pair => {
        if (pair.includes(btn)) {
          pair.forEach(conflictingBtn => {
            conflictingBtn.classList.remove('selected');
          });
        }
      });

      // 선택된 버튼이 아니라면 선택 상태로 변경
      if (!isSelected) {
        btn.classList.add('selected');
      }
    });
  });

  const submitButton = document.getElementById('submit-button');

  submitButton.addEventListener('click', () => {
    // 데이터베이스의 값을 업데이트합니다.
    const mbtiValues = {};
    mbtiBtns.forEach(button => {
      const mbtiType = button.dataset.mbtiType;
      mbtiValues[mbtiType] = button.classList.contains('selected') ? 1 : 0;
    });

    // mbtiValues 객체를 서버로 전송하는 코드를 추가해야 합니다.
    fetch('/submit', { method: "POST", headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(mbtiValues) }).then((res) => res.json()).then((data) => {
      alert(data['msg'])
      window.location.reload();
    })
      .catch(error => {
        console.log('데이터 전송 중에 오류가 발생했습니다:', error);
      });
  });
</script>

</html>
